<!DOCTYPE html>

<html>
  <head>
    <meta name="viewport" width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0>
    <style> body {padding: 0; margin: 0;} </style>
    <script src="../p5.min.js"></script>
    <script src="../addons/p5.dom.min.js"></script>
    <script src="../addons/p5.sound.min.js"></script>
<script defer src=http://CDN.JSDelivr.net/npm/p5></script>
<script defer src=http://CDN.JSDelivr.net/npm/p5/lib/addons/p5.dom.min.js></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">


<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700' rel='stylesheet' type='text/css'>

  <script   src="http://code.jquery.com/jquery-3.3.1.js"   integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="   crossorigin="anonymous"></script>

<link rel="stylesheet" type="text/css" href="style.css">

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32" />
<link rel="icon" href="http://example.com/favicon.png">


 <title>Gifs for Guys</title>


    <div class="topnav">
  <a class="active" href="http://gifclip.com">GifClip</a>
    <a href="http://gifclip.com/trend.html" class="action-button  animate red">Trending</a>
     <a href="http://gifclip.com/fail.html" class="action-button  animate red">Funny</a>
     <a href="http://gifclip.com/news.html" class="action-button  animate red">Sexy</a>
</div>
    </head>
 <body>

<h1 class="topd">GifClip Is Good</h1>



  <div rel="preload" class="giphy-wrapper">
    <div class="settings">
        <button id="querySearch1" class="btn btn-warning settings-btn1" type="button">More<span c aria-hidden="true"></span></button>
         <button id="querySearch" class="btn btn-default settings-btn" type="button">Search<span class="glyphicon" aria-hidden="true"></span></button>
        <div class="form settings-menu">
            <div class="input-group">

                <span class="input-group-btn">
                </span>
                  <input id="queryInput" type="text" class="form-control" value="#Gif" placeholder="Search for...">
                  
            </div><!-- /input-group -->
        </div><!-- /.form -->
    </div>
    <div class="giphy-container" id="giphy-holder">

    </div>
    <div id="giphy-link"></div>





<script>

!function(){

  function giphyQuery(query) {
    if (!query) {
      console.log("ERROR: No query entered");
      return;
    }
    var query = query.replace(/ /g, '+');

    var url = "https://api.giphy.com/v1/gifs/random?api_key=";
    url += "yDCCeSvcpPbQ6VyCgzSv1zTTlb8gLQIx&tag=";
    url += query;

    return url;
  }

  function makeImage(url, altText) {
    var imgHTML = '<img class="img-responsive" src="';
    imgHTML += url;
    imgHTML += '" alt="'
    imgHTML += altText;
    imgHTML += '">';

    return imgHTML;
  }
  
  function makeAnchor(url) {
      var anchor = '<a target="_blank" href="'
      anchor += url;
      anchor += '">';
      anchor += '<small>' + url + '</small>';
      anchor += '</a>';
      
      return anchor; 
  }

  function getQuery() {
    return $('#queryInput').val();
  }

  function callJSON() {
    var query = getQuery();
    var url = giphyQuery(query);
    $.getJSON(url, function(response){
      if (!response.data.image_url) {
        $('#giphy-holder').html("Sorry, No gif found.");
        return;
      };
      var newImage = makeImage(response.data.image_url, response.data.caption);
      var newAnchor = makeAnchor(response.data.image_url);
      $('#giphy-holder').html(newImage);
      $('#giphy-link').html(newAnchor);
    });
  }

  // RUN THE PROGRAM

  callJSON();

  // EVENT HANDLERS

  $("#querySearch").on('click', function(){
    callJSON();
  });

   $("#querySearch1").on('click', function(){
    callJSON();
  });

  $(document).keypress(function(e) {
      if(e.which == 13) {
          $("#querySearch").click();
      }
  });
}();

</script>




<body>
  <div id='container'>

     <h4><center> View More. Click on the gif.</h4>
    


    <!-- This will be where the buttons are added and displayed. -->
    <div id="buttonItems" class="centerText"></div> 

    <!-- This is the form to add a game-themed button to the array. -->
    <div id="theMagic" class="container text-center ">
      <form  class="form-inline">
        <div class="form-group">
          <input class="hide" type="text" id="game-input" class="form-control" placeholder="m">
        </div>
        <input class="hide" id="addGameItem" type="submit" value="Make Button" >
        <!-- If there are any error messages, they should appear here -->
        <span id="entry"></span>
      </form>
    </div>
    <!-- reference for properly centering forms via bootstrap: https://www.w3schools.com/bootstrap/tryit.asp?filename=trybs_form_inline&stacked=h -->

    <!-- reference of all Bootsrap classes: https://www.w3schools.com/bootstrap/bootstrap_ref_all_classes.asp -->

    <!-- This is where the GIFs will actually be shown to the user, after they've clicked the corresponding button. -->
    <div id="ratings"></div>

    <script type='text/javascript' src='assets/javascript/logic.js'></script>


  </div>


</body>

</html>

<script>

// ref example(s) from class: GWU_Data_Bootcamp/GWAR201710FSF5-Class-Repository-FSF/06-ajax/01-Activities/14-DynamicElements

// This is the initial videogame title array.
var videoGames = ["Dancing", "Funny", "Animals", "Dog", "Cat", "Boobs", "MMA", "Boxing", "Stocks", "Racing", "MLB", "NFL", "NBA", "NHL", "Design", "Surfing", "Cute", "Hot", "Sexy", "TheChive", "Extreme", "XGames"];
var gameGIF = "";

// This function shows all the buttons at the top of the page.
function showButtons() {
  $("#buttonItems").empty();
  $("#game-input").val("");

  for (var i = 0; i < videoGames.length; i++) {
    var button = $("<button class='btn btn-primary'>");
    button.addClass("game");
    button.attr("game-name", videoGames[i]);
    button.text(videoGames[i]);
    $("#buttonItems").append(button);
    $("#buttonItems").append(" ");
  }
}

showButtons();

// This runs when the user clicks "Load Game!, adding the seletion to the button array and updating the buttons.
$("#addGameItem").on("click", function(event) {
  $("#entry").empty();
  event.preventDefault();
  var gameInput = $("#game-input").val().trim();
  var gameTerm = $(this).attr("game-name");

  //  Ensures the user's button has at least 12 GIFs available from GIPHY API.
  // If there aren't 12, an error message will be shown and no button will be created.
  var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + gameInput + "&limit=1&api_key=XNXXBU3B0vxwgDFnrUVQrnh1U12f5CSP" + "&offset=" + Math.floor((Math.random() * 100) + 1);

  //couldn't seem to get different gifs for each button press; tried "offset" and it WORKED! after I remembered I had two different sections w/ API calls! Now, I have varying reuslts when the same button is pressed more than once! (cool)
  // GIPHY documentation reference: https://developers.giphy.com/docs/

  $.ajax({
    url: queryURL,
    method: "GET"
  }).done(function(response) {

    if (response.pagination.total_count >= 12) {
      videoGames.push(gameInput);
      showButtons();
    } else if (response.pagination.total_count === 0) {
      $("#entry").html(" Sorry, nothing in the GIPHY database.  Please try again!");
    } else if (response.pagination.total_count === 1) {
      $("#entry").html(" Sorry, there was only 1 result for this.  Please try again.");
    } else {
      $("#entry").html(" Sorry, there were only " + response.pagination.total_count + " results for this.  Please try again.");
    }
    $("#game-input").val("");
  });

});

$(document).on("click", ".game", display);

function display() {

  // Clears out error message (if one pops up)
  $("#entry").empty();

  // defines and then executes; clears old gifs when new gifs are called after button press <-----this is now working; was referencing the wrong section at first (i.e. "theMagic" id instead of the correct "ratings" id)
  function clearGifs() {
    $("#ratings").empty();
  }
  clearGifs();

  var gameTerm = $(this).attr("game-name");

  // The GIPHY query.  This limits to 12 results
  var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + gameTerm + "&limit=12&api_key=XNXXBU3B0vxwgDFnrUVQrnh1U12f5CSP" + "&offset=" + Math.floor((Math.random() * 100) + 1);

  $.ajax({
    url: queryURL,
    method: "GET"
  }).done(function(response) {

    // This runs 10 times (limit is 10 per above query) to show all the GIPHY pictures from the website's API response.
    for (var i = 0; i < response.data.length; i++) {

      // Gets the animated gif URL
      var active = response.data[i].images.fixed_width.url;
      // Gets the still gif URL
      var still = response.data[i].images.fixed_width_still.url;
      var rating = "Rating: " + (response.data[i].rating).toUpperCase();

      // Creates the new img item
      var gameGIF = $("<img>");

      // Changes the text color of ratings to green so can be seen against background more easily
      $("#ratings");

      // This creates a new div for the rating so that it maintains the gifs size
      var ratingDiv = $("<div id='ratingDiv'>" + rating + "</div>");

      gameGIF.attr({
        "active": active,
        "still": still,
        "src": still,
        "state": "still"
      });

      // This holds the new div for both the image itself and the associated rating. All images should be paired w/ their rating.
      var ratingAndImage = $("<div class='floatLeft'>");

      $(ratingAndImage).prepend(gameGIF, ratingDiv);

      // This adds the rating and image to the page.
      $("#ratings").prepend(ratingAndImage);

      // When the user clicks on a GIF, this will either start or stop the animation of said GIF.
      $(gameGIF).on("click", function(event) {

        // Clears out any error messages, concerning query response i.e. number of results (if there are too few)
        $("#entry").empty();

        var state = $(this).attr("state");
        var source = $(this).attr("src");

        if (state === "still") {
          $(this).attr("src", $(this).attr("active"));
          $(this).attr("state", "active");
        } else {
          $(this).attr("src", $(this).attr("still"));
          $(this).attr("state", "still");
        }
      });

    }

  });

}
</script>








  </body>
</html>


<body>

   <h4> Not what your looking for? </h4>


    <div class="header">
        <div class="banner">
        <form class="search-form">
            <div class="search-form-items">
            <input class="search-field txtsize" type="search" placeholder="Find A Gif ..."/>
            </div>
         </form>
        </div>
        <div class="giphyResult">   
        </div> 
    <script src="./index.js"></script>

   

</body>
</html>

<script>var mirrorText = document.querySelector(".mirror-text");
var form = document.querySelector(".search-form");
var field = document.querySelector(".search-field");
var giphyResult = document.querySelector(".giphyResult");
var clearSearch = document.querySelector(".search__clear");


var url = "https://api.giphy.com/v1/gifs/search?";
var apiKey = "eEe0r8lvLRjRB3jHcamfLfHjITajolsN";
// build query string from user input to request data from API
function getQueryString() {
    var query   = url
                + "q=" + encodeURI(field.value)
                + "&api_key=" + apiKey

    return query;
}

var result = {};
// listen for submit event then return a json response object and push response to result variable
form.addEventListener('submit', function(event) {
    fetch(getQueryString())
    .then(function(response) { return response.json(); })
    .then(function(response) {
        renderImages(response.data);
    });
    // prevent page reload 
    event.preventDefault();
    form.reset();
});
//render images
function renderImages (data) {
    var oldImage = document.querySelectorAll(".search__result");
    if (oldImage.length > 0) {
        oldImage.forEach(function(image) {
            image.remove();
        });
    }

    //loop through response data and creat new image elements
    data.forEach(function(value, key){
        // create anchor tag and append to div
        var anchor = getElement("a", {href: value.url, class: "result__link", target: "_blank"});
        setElement(anchor, ".giphyResult");
        //create an image tag and append the image to the anchor tag
        var image = getElement("img", {src: value.images.fixed_width.url,alt: value.title, class: "search__result"});
        setElement(image, '.result__link');
    });
}
/**
 * createElement
 * @param {string} type 
 * @param {object} attributes 
 */
function getElement(type, attributes) {
    var element = document.createElement(type);
    for (attribute in attributes) {
        element.setAttribute(attribute, attributes[attribute]);
    }
    return element;
}
//append image to target element
function setElement (element, target) {
    document.querySelector(target).appendChild(element);
}
</script>




